!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(p){var f=p(document),w=p(window),e=p("body"),d="displayController",h="hasActiveHover",v="forcedOpen",m="hasMouseMove",T="mouseOnToPopup",a="originalTitle",l="powertip",c="powertipjq",u="powertiptarget",g=".powertip",y=180/Math.PI,b={elements:null,tooltips:null,isTipOpen:!1,isFixedTipOpen:!1,isClosing:!1,tipOpenImminent:!1,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,closeDelayTimeout:null,mouseTrackingActive:!1,delayInProgress:!1,windowWidth:0,windowHeight:0,scrollTop:0,scrollLeft:0},H={none:0,top:1,bottom:2,left:4,right:8};function k(){var o=this;o.top="auto",o.left="auto",o.right="auto",o.bottom="auto",o.set=function(e,t){p.isNumeric(t)&&(o[e]=Math.round(t))}}function P(o,n,i){var s=null,t=null;function r(e,t){a(),o.data(h)?l():e?(t&&o.data(v,!0),c(),i.showTip(o)):(b.tipOpenImminent=!0,s=setTimeout(function(){var e,t;s=null,e=Math.abs(b.previousX-b.currentX),t=Math.abs(b.previousY-b.currentY),e+t<n.intentSensitivity?(l(),c(),i.showTip(o)):(b.previousX=b.currentX,b.previousY=b.currentY,r())},n.intentPollInterval))}function a(e){s=clearTimeout(s),(b.closeDelayTimeout&&t===b.closeDelayTimeout||e)&&l()}function l(){b.closeDelayTimeout=clearTimeout(b.closeDelayTimeout),b.delayInProgress=!1}function c(){b.delayInProgress&&b.activeHover&&!b.activeHover.is(o)&&b.activeHover.data(d).hide(!0)}this.show=r,this.hide=function(e){t&&(t=b.closeDelayTimeout=clearTimeout(t),b.delayInProgress=!1),a(),b.tipOpenImminent=!1,o.data(h)&&(o.data(v,!1),e?i.hideTip(o):(b.delayInProgress=!0,b.closeDelayTimeout=setTimeout(function(){b.closeDelayTimeout=null,i.hideTip(o),b.delayInProgress=!1,t=null},n.closeDelay),t=b.closeDelayTimeout))},this.cancel=a,this.resetPosition=function(){i.resetPosition(o)}}function t(){this.compute=function(e,t,o,n,i){var s,r,a=t.split("-")[0],l=new k;switch(r=e,s=Boolean(window.SVGElement&&r[0]instanceof SVGElement)?function(e,t){var o,n,i,s,r=e.closest("svg")[0],a=e[0],l=r.createSVGPoint(),c=a.getBBox(),u=a.getScreenCTM(),p=c.width/2,f=c.height/2,w=[],d=["nw","n","ne","e","se","s","sw","w"];function h(){w.push(l.matrixTransform(u))}if(l.x=c.x,l.y=c.y,h(),l.x+=p,h(),l.x+=p,h(),l.y+=f,h(),l.y+=f,h(),l.x-=p,h(),l.x-=p,h(),l.y-=f,h(),w[0].y!==w[1].y||w[0].x!==w[7].x)for(n=Math.atan2(u.b,u.a)*y,(i=Math.ceil((n%360-22.5)/45))<1&&(i+=8);i--;)d.push(d.shift());for(s=0;s<w.length;s++)if(d[s]===t){o=w[s];break}return{top:o.y+b.scrollTop,left:o.x+b.scrollLeft}}(e,a):function(e,t){var o,n,i=e.offset(),s=e.outerWidth(),r=e.outerHeight();switch(t){case"n":o=i.left+s/2,n=i.top;break;case"e":o=i.left+s,n=i.top+r/2;break;case"s":o=i.left+s/2,n=i.top+r;break;case"w":o=i.left,n=i.top+r/2;break;case"nw":o=i.left,n=i.top;break;case"ne":o=i.left+s,n=i.top;break;case"sw":o=i.left,n=i.top+r;break;case"se":o=i.left+s,n=i.top+r}return{top:n,left:o}}(e,a),t){case"n":l.set("left",s.left-o/2),l.set("bottom",b.windowHeight-s.top+i);break;case"e":l.set("left",s.left+i),l.set("top",s.top-n/2);break;case"s":l.set("left",s.left-o/2),l.set("top",s.top+i);break;case"w":l.set("top",s.top-n/2),l.set("right",b.windowWidth-s.left+i);break;case"nw":l.set("bottom",b.windowHeight-s.top+i),l.set("right",b.windowWidth-s.left-20);break;case"nw-alt":l.set("left",s.left),l.set("bottom",b.windowHeight-s.top+i);break;case"ne":l.set("left",s.left-20),l.set("bottom",b.windowHeight-s.top+i);break;case"ne-alt":l.set("bottom",b.windowHeight-s.top+i),l.set("right",b.windowWidth-s.left);break;case"sw":l.set("top",s.top+i),l.set("right",b.windowWidth-s.left-20);break;case"sw-alt":l.set("left",s.left),l.set("top",s.top+i);break;case"se":l.set("left",s.left-20),l.set("top",s.top+i);break;case"se-alt":l.set("top",s.top+i),l.set("right",b.windowWidth-s.left)}return l}}function n(r){var a=new t,l=p("#"+r.popupId);function n(t){b.isClosing=!0,b.isTipOpen=!1,b.desyncTimeout=clearInterval(b.desyncTimeout),t.data(h,!1),t.data(v,!1),f.off("click"+g),l.off(g),l.fadeOut(r.fadeOutTime,function(){var e=new k;b.activeHover=null,b.isClosing=!1,b.isFixedTipOpen=!1,l.removeClass(),e.set("top",b.currentY+r.offset),e.set("left",b.currentX+r.offset),l.css(e),t.trigger("powerTipClose")})}function i(){if(!b.isFixedTipOpen&&(b.isTipOpen||b.tipOpenImminent&&l.data(m))){var e,t=l.outerWidth(),o=l.outerHeight(),n=new k;n.set("top",b.currentY+r.offset),n.set("left",b.currentX+r.offset),(e=Y(n,t,o))!==H.none&&(1===function(e){var t=0;for(;e;)e&=e-1,t++;return t}(e)?e===H.right?n.set("left",b.windowWidth-t):e===H.bottom&&n.set("top",b.scrollTop+b.windowHeight-o):(n.set("left",b.currentX-t-r.offset),n.set("top",b.currentY-o-r.offset))),l.css(n)}}function s(n){var e,i;r.smartPlacement?(e=p.fn.powerTip.smartPlacementLists[r.placement],p.each(e,function(e,t){var o=Y(c(n,t),l.outerWidth(),l.outerHeight());if(i=t,o===H.none)return!1})):(c(n,r.placement),i=r.placement),l.removeClass("w nw sw e ne se n s w se-alt sw-alt ne-alt nw-alt"),l.addClass(i)}function c(e,t){var o,n,i=0,s=new k;for(s.set("top",0),s.set("left",0),l.css(s);o=l.outerWidth(),n=l.outerHeight(),s=a.compute(e,t,o,n,r.offset),l.css(s),++i<=5&&(o!==l.outerWidth()||n!==l.outerHeight()););return s}function u(){var e=!1;b.isTipOpen&&!b.isClosing&&!b.delayInProgress&&(-1<p.inArray("mouseleave",r.closeEvents)||-1<p.inArray("mouseout",r.closeEvents)||-1<p.inArray("blur",r.closeEvents)||-1<p.inArray("focusout",r.closeEvents))&&(!1===b.activeHover.data(h)||b.activeHover.is(":disabled")?e=!0:o(b.activeHover)||b.activeHover.is(":focus")||b.activeHover.data(v)||l.data(T)&&o(l)||(e=!0),e&&n(b.activeHover))}0===l.length&&(l=p("<div/>",{id:r.popupId}),0===e.length&&(e=p("body")),e.append(l),b.tooltips=b.tooltips?b.tooltips.add(l):l),r.followMouse&&(l.data(m)||(f.on("mousemove"+g,i),w.on("scroll"+g,i),l.data(m,!0))),this.showTip=function(t){t.data(h,!0),l.queue(function(e){!function t(o){var e;if(!o.data(h))return;if(b.isTipOpen)return b.isClosing||n(b.activeHover),void l.delay(100).queue(function(e){t(o),e()});o.trigger("powerTipPreRender");e=C(o);{if(!e)return;l.empty().append(e)}o.trigger("powerTipRender");b.activeHover=o;b.isTipOpen=!0;l.data(T,r.mouseOnToPopup);r.followMouse?i():(s(o),b.isFixedTipOpen=!0);l.addClass(r.popupClass);o.data(v)||f.on("click"+g,function(e){var t=e.target;t!==o[0]&&(r.mouseOnToPopup&&(t===l[0]||p.contains(l[0],t))||p.powerTip.hide())});r.mouseOnToPopup&&!r.manual&&(l.on("mouseenter"+g,function(){b.activeHover&&b.activeHover.data(d).cancel()}),l.on("mouseleave"+g,function(){b.activeHover&&b.activeHover.data(d).hide()}));l.fadeIn(r.fadeInTime,function(){b.desyncTimeout||(b.desyncTimeout=setInterval(u,500)),o.trigger("powerTipOpen")})}(t),e()})},this.hideTip=n,this.resetPosition=s}function i(e){return Boolean(e&&"number"==typeof e.pageX)}function O(){b.scrollLeft=w.scrollLeft(),b.scrollTop=w.scrollTop(),b.windowWidth=w.width(),b.windowHeight=w.height()}function I(){b.windowWidth=w.width(),b.windowHeight=w.height()}function x(){var e=w.scrollLeft(),t=w.scrollTop();e!==b.scrollLeft&&(b.currentX+=e-b.scrollLeft,b.scrollLeft=e),t!==b.scrollTop&&(b.currentY+=t-b.scrollTop,b.scrollTop=t)}function X(e){b.currentX=e.pageX,b.currentY=e.pageY}function o(e){var t=e.offset(),o=e[0].getBoundingClientRect(),n=o.right-o.left,i=o.bottom-o.top;return b.currentX>=t.left&&b.currentX<=t.left+n&&b.currentY>=t.top&&b.currentY<=t.top+i}function C(e){var t,o,n=e.data(l),i=e.data(c),s=e.data(u);return n?(p.isFunction(n)&&(n=n.call(e[0])),o=n):i?(p.isFunction(i)&&(i=i.call(e[0])),0<i.length&&(o=i.clone(!0,!0))):s&&0<(t=p("#"+s)).length&&(o=t.html()),o}function Y(e,t,o){var n=b.scrollTop,i=b.scrollLeft,s=n+b.windowHeight,r=i+b.windowWidth,a=H.none;return(e.top<n||Math.abs(e.bottom-b.windowHeight)-o<n)&&(a|=H.top),(e.top+o>s||Math.abs(e.bottom-b.windowHeight)>s)&&(a|=H.bottom),(e.left<i||e.right+t>r)&&(a|=H.left),(e.left+t>r||e.right<i)&&(a|=H.right),a}return p.fn.powerTip=function(e,t){var s,r,o=this;return o.length?"string"===p.type(e)&&p.powerTip[e]?p.powerTip[e].call(o,o,t):(s=p.extend({},p.fn.powerTip.defaults,e),r=new n(s),b.mouseTrackingActive||(b.mouseTrackingActive=!0,O(),p(O),f.on("mousemove"+g,X),w.on("resize"+g,I),w.on("scroll"+g,x)),o.each(function(){var e,t=p(this),o=t.data(l),n=t.data(c),i=t.data(u);t.data(d)&&p.powerTip.destroy(t),e=t.attr("title"),o||i||n||!e||(t.data(l,e),t.data(a,e),t.removeAttr("title")),t.data(d,new P(t,s,r))}),s.manual||(p.each(s.openEvents,function(e,t){-1<p.inArray(t,s.closeEvents)?o.on(t+g,function(e){p.powerTip.toggle(this,e)}):o.on(t+g,function(e){p.powerTip.show(this,e)})}),p.each(s.closeEvents,function(e,t){p.inArray(t,s.openEvents)<0&&o.on(t+g,function(e){p.powerTip.hide(this,!i(e))})}),o.on("keydown"+g,function(e){27===e.keyCode&&p.powerTip.hide(this,!0)})),b.elements=b.elements?b.elements.add(o):o,o):o},p.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:!1,popupId:"powerTip",popupClass:null,intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:!1,offset:10,mouseOnToPopup:!1,manual:!1,openEvents:["mouseenter","focus"],closeEvents:["mouseleave","blur"]},p.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"],"nw-alt":["nw-alt","n","ne-alt","sw-alt","s","se-alt","w","e"],"ne-alt":["ne-alt","n","nw-alt","se-alt","s","sw-alt","e","w"],"sw-alt":["sw-alt","s","se-alt","nw-alt","n","ne-alt","w","e"],"se-alt":["se-alt","s","sw-alt","ne-alt","n","nw-alt","e","w"]},p.powerTip={show:function(e,t){return i(t)?(X(t),b.previousX=t.pageX,b.previousY=t.pageY,p(e).data(d).show()):p(e).first().data(d).show(!0,!0),e},reposition:function(e){return p(e).first().data(d).resetPosition(),e},hide:function(e,t){var o;return t=!e||t,e?o=p(e).first().data(d):b.activeHover&&(o=b.activeHover.data(d)),o&&o.hide(t),e},toggle:function(e,t){return b.activeHover&&b.activeHover.is(e)?p.powerTip.hide(e,!i(t)):p.powerTip.show(e,t),e},destroy:function(e){var t=e?p(e):b.elements;return b.elements&&0!==b.elements.length&&(t.off(g).each(function(){var e=p(this),t=[a,d,h,v];e.data(a)&&(e.attr("title",e.data(a)),t.push(l)),e.removeData(t)}),b.elements=b.elements.not(t),0===b.elements.length&&(w.off(g),f.off(g),b.mouseTrackingActive=!1,b.tooltips.remove(),b.tooltips=null)),e}},p.powerTip.showTip=p.powerTip.show,p.powerTip.closeTip=p.powerTip.hide,p.powerTip});